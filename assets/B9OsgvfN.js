import{a as L,t as b,i as S,c as O,n as W,b as q,d as B}from"./DcWc1Ixg.js";import{B as x,l as y,x as P,m as R,O as j}from"./CHLUor9Y.js";function F(t){var e;const o=b(t);return(e=o==null?void 0:o.$el)!=null?e:o}const I=S?window:void 0,A=S?window.navigator:void 0;function E(...t){let e,o,r,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,r,l]=t,e=I):[e,o,r,l]=t,!e)return W;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const s=[],d=()=>{s.forEach(a=>a()),s.length=0},p=(a,i,m,v)=>(a.addEventListener(i,m,v),()=>a.removeEventListener(i,m,v)),f=P(()=>[F(e),b(l)],([a,i])=>{if(d(),!a)return;const m=B(i)?{...i}:i;s.push(...o.flatMap(v=>r.map(g=>p(a,v,g,m))))},{immediate:!0,flush:"post"}),u=()=>{f(),d()};return q(u),u}function N(){const t=y(!1),e=j();return e&&R(()=>{t.value=!0},e),t}function M(t){const e=N();return x(()=>(e.value,!!t()))}function C(t,e={}){const{controls:o=!1,navigator:r=A}=e,l=M(()=>r&&"permissions"in r);let s;const d=typeof t=="string"?{name:t}:t,p=y(),f=()=>{s&&(p.value=s.state)},u=O(async()=>{if(l.value){if(!s)try{s=await r.permissions.query(d),E(s,"change",f),f()}catch{p.value="prompt"}return s}});return u(),o?{state:p,isSupported:l,query:u}:p}function k(t={}){const{navigator:e=A,read:o=!1,source:r,copiedDuring:l=1500,legacy:s=!1}=t,d=M(()=>e&&"clipboard"in e),p=C("clipboard-read"),f=C("clipboard-write"),u=x(()=>d.value||s),a=y(""),i=y(!1),m=L(()=>i.value=!1,l);function v(){d.value&&h(p.value)?e.clipboard.readText().then(n=>{a.value=n}):a.value=_()}u.value&&o&&E(["copy","cut"],v);async function g(n=b(r)){u.value&&n!=null&&(d.value&&h(f.value)?await e.clipboard.writeText(n):T(n),a.value=n,i.value=!0,m.start())}function T(n){const c=document.createElement("textarea");c.value=n??"",c.style.position="absolute",c.style.opacity="0",document.body.appendChild(c),c.select(),document.execCommand("copy"),c.remove()}function _(){var n,c,w;return(w=(c=(n=document==null?void 0:document.getSelection)==null?void 0:n.call(document))==null?void 0:c.toString())!=null?w:""}function h(n){return n==="granted"||n==="prompt"}return{isSupported:u,text:a,copied:i,copy:g}}export{k as a,E as u};
